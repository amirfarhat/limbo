FROM 1science/alpine

ENV PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

# get our basic-needs sorted
RUN echo http://dl-cdn.alpinelinux.org/alpine/edge/testing >> /etc/apk/repositories
RUN apk update
RUN apk add python3 python3-dev vim bash curl \
    && ln -s /usr/bin/python3 /usr/bin/python \
    && /usr/bin/pip3.5 install --upgrade pip \
    && mkdir -p /opt /app

RUN apk add gcc musl-dev libffi-dev openssl-dev

ADD . /app
WORKDIR /app

# Commands from "make install"
RUN pip install -r requirements.txt
RUN python3 setup.py install
RUN rm -rf build dist limbo.egg-info

CMD pytest --cov=limbo --cov-report term-missing test

# vim: set expandtab tabstop=4 shiftwidth=4 autoindent smartindent:
