FROM ubuntu

ENV PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

# get our basic-needs sorted
RUN apt-get update

RUN apt-get -y install apt-utils locales
RUN locale-gen en_US.UTF-8  
ENV LANG en_US.UTF-8  
ENV LANGUAGE en_US:en  
ENV LC_ALL en_US.UTF-8

RUN apt-get -y install python3 python3-pip python3-dev \
    && ln -s /usr/bin/pip3 /usr/bin/pip \
    && ln -s /usr/bin/python3 /usr/bin/python \
    && pip install --upgrade pip setuptools \
    && mkdir -p /opt /app

RUN apt-get -y install gcc libffi-dev libssl-dev 

ADD . /app
WORKDIR /app

# Commands from "make install"
RUN pip install -r requirements.txt
RUN python3 setup.py install
RUN rm -rf build dist limbo.egg-info

CMD pytest --cov=limbo --cov-report term-missing test

# vim: set expandtab tabstop=4 shiftwidth=4 autoindent smartindent:
